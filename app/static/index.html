<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Infra Uptime Monitor</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 24px; max-width: 980px; }
    h1 { margin: 0 0 6px; }
    .muted { color: #666; margin: 0 0 18px; }
    .row { display: flex; gap: 16px; flex-wrap: wrap; }
    .card { border: 1px solid #ddd; border-radius: 10px; padding: 14px; flex: 1; min-width: 320px; }
    label {
      display: block;
      font-size: 11px;
      color: #555;
      margin: 8px 0 4px;
    }
    input, select {
      width: 100%;
      padding: 6px 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 13px;
    }
    button {
      padding: 7px 10px;
      border: 1px solid #333;
      border-radius: 8px;
      background: #111;
      color: #fff;
      cursor: pointer;
      font-size: 13px;
    }
    button.secondary { background:#fff; color:#111; border-color:#bbb; }
    table { width: 100%; border-collapse: collapse; }
    th, td { text-align:left; padding: 8px; border-bottom: 1px solid #eee; font-size: 14px; }
    tr:hover { background: #fafafa; }
    code { background: #f6f6f6; padding: 2px 6px; border-radius: 6px; }
    .pill { display:inline-block; padding:2px 8px; border-radius: 999px; font-size: 12px; border:1px solid #ddd; }
    .ok { border-color:#b7e3b7; background:#f1fff1; }
    .bad { border-color:#f3b0b0; background:#fff1f1; }
  </style>
</head>
<body>
  <h1>Infra Uptime Monitor</h1>
  <p class="muted">Simple web UI on top of the API. Everything talks via JSON endpoints.</p>

  <div class="row">
    <div class="card">
      <h3>Add target</h3>

      <label for="name">Name</label>
      <input id="name" placeholder="e.g. Cloudflare ICMP" />

      <label for="type">Type</label>
      <select id="type">
        <option value="http">http</option>
        <option value="tcp">tcp</option>
        <option value="icmp">icmp</option>
      </select>

      <label for="target">Target (URL or IP/host)</label>
      <input id="target" placeholder="https://google.com or 1.1.1.1" />

      <label for="port">Port (TCP only)</label>
      <input id="port" type="number" placeholder="53" />

      <div style="margin-top:12px; display:flex; gap:10px;">
        <button id="addBtn">Add</button>
        <button class="secondary" id="refreshBtn">Refresh</button>
      </div>

      <p style="margin-top:12px; font-size: 12px; color:#666;">
        Tip: TCP requires a port. HTTP/ICMP ignore the port field.
      </p>

      <div id="msg" style="margin-top:10px; font-size: 13px;"></div>
    </div>

    <div class="card">
      <h3>Targets</h3>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Type</th>
            <th>Target</th>
            <th>Port</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="targetsBody"></tbody>
      </table>
    </div>
  </div>

  <div class="card" style="margin-top:16px;">
    <h3>Target details: <span id="detailTitle" class="pill">—</span></h3>
    <p style="margin: 6px 0 12px; color:#666;">
      Checks: <code>/targets/{id}/checks</code> • Uptime: <code>/targets/{id}/uptime</code>
    </p>

    <div style="display:flex; gap:10px; flex-wrap: wrap; margin-bottom: 10px;">
      <button id="loadChecksBtn" class="secondary">Load checks</button>
      <button id="loadUptimeBtn" class="secondary">Load uptime</button>
      <input id="uptimeHours" type="number" value="24" min="1" style="width:120px;" />
    </div>

    <pre id="detailOut" style="background:#0b1020; color:#d7e1ff; padding:12px; border-radius:10px; overflow:auto; max-height: 320px;"></pre>
  </div>

  <script src="./app.js"></script>
</body>
</html>